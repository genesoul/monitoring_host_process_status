# 远程Linux主机及进程状态监控系统---后台监测子系统

## 目录

- [子系统结构](#子系统结构)
- [子系统简介](#子系统简介)
- [子系统功能说明](#子系统功能说明)
- [运行方法](#运行方法)
- [待优化功能](#待优化功能)

## 子系统结构

```text
.
├── data_base.py                # 数据库操作
├── email.conf                  # 预警邮箱的登录信息 
├── exception_email_user.py     # 向用户发送预警邮件 
├── monitoring_process.py       # 定时监测主机及进程，并出现异常时发送预警邮件 
└── mysql_config.py             # 数据库配置 
```


## 子系统简介
本子系统实现对远程Linux主机及进程状态的监测，利用系统后台监测程序定时对其状态进行获取，且出现异常时，预警处理。


## 子系统功能说明
1. 定时监测主机及所关注进程的状态
2. 进程状态包括CPU、内存、缓存以及日志（若有才监测）
3. 出现异常（停止）向用户提供预警信息，发送邮件


## 运行方法
```text
python monitoring_process.py  # 即可，或者使用nohup命令，让程序在后台运行
```

## 待优化功能
1. 监测主机状态时，不同用户关注相同的主机，则只监测一次，更新所有。
2. 如上，不同用户关注相同进程时，也是监测一次，而不需要每次都要监测。（重新设置数据表结构）
3. 将近30天的探测记录，转移到专门存储历史记录的表中，不是删除。
4. 对于父进程和子进程，通过文件名称kill，或者获取相同文件名称的进程号，再kill
5. 增加主机状态的监测
6. 增加主机及进程的网络状态监测
7. 确认异常规则（主机和进程）
8. 潜在bug，查询pid，但是出现两条记录，需要根据pid，匹配真正的记录（严重bug！！！，但出现概率较低）
